<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .form-container {
        max-width: 400px;
        margin-bottom: 20px;
      }
      .form-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
      }
      input {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
      }
      button {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
      #book-list {
        margin-top: 20px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
</head>

<body>
    <div class="form-container">
        <h2>Book Management</h2>
        <form id="book-form">
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" name="title" id="title" required />
            </div>
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" name="author" id="author" required />
            </div>
            <div class="form-group">
                <label for="isbn">ISBN:</label>
                <input type="text" name="isbn" id="isbn" pattern="[0-9]{10,13}" title="ISBN must be 10 or 13 digits"
                    required />
            </div>
            <button type="submit">Add Book</button>
        </form>
    </div>
    <div id="book-list">
        <h3>Book List</h3>
        <table id="book-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>ISBN</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        class Book {
            constructor(title, author, isbn) {
                this.title = title;
                this.author = author;
                this.isbn = isbn;
            }
        }
        document.getElementById("book-form").addEventListener("submit", function (e) {
            e.preventDefault();
            const title = document.getElementById("title").value;
            const author = document.getElementById("author").value;
            const isbn = document.getElementById("isbn").value;

            const book = new Book(title, author, isbn);
            addBook(book);
            displayBooks();
            this.reset();
        });

        function addBook(book) {
            let books = getBooks();
            books.push(book);
            localStorage.setItem("books", JSON.stringify(books));
        }
        function getBooks() {
            let books = localStorage.getItem('books');
            return books ? JSON.parse(books) : [];
        }

        function displayBooks() {
            const books = getBooks();
            const tbody = document.querySelector('#book-list tbody');
            tbody.innerHTML = '';
            books.forEach((book, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
            <td>${book.title}</td>
            <td>${book.author}</td>
            <td>${book.isbn}</td>
            <td>
                <button onclick="editBook(${index})">Edit</button>
                <button onclick="deleteBook(${index})">Delete</button>
            </td>
        `;
                tbody.appendChild(row);
            });
        }

        function editBook(index) {
            const books = getBooks();
            const book = books[index];
            document.getElementById('title').value = book.title;
            document.getElementById('author').value = book.author;
            document.getElementById('isbn').value = book.isbn;

            document.getElementById('book-form').onsubmit = function (e) {
                e.preventDefault();
                book.title = document.getElementById('title').value;
                book.author = document.getElementById('author').value;
                book.isbn = document.getElementById('isbn').value;
                books[index] = book;
                localStorage.setItem('books', JSON.stringify(books));
                displayBooks();
                this.reset();
            };
        }

        function deleteBook(index) {
            const books = getBooks();
            books.splice(index, 1);
            localStorage.setItem('books', JSON.stringify(books));
            displayBooks();
        }
        document.addEventListener('DOMContentLoaded', displayBooks);


    </script>
</body>

</html>